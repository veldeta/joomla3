var rcShadowbox;window.addEventListener("load",function(){"use strict";(rcShadowbox=new RCShadowbox).setup()});var RCShadowbox=function(){"use strict";var e,t,i,n,s,d,r,c,o,a,l,_=[],u=!1,h=!1,m=0==rc_sb_params.title_option||2==rc_sb_params.title_option,b=rc_sb_params.hide_scroll_bar;return{setup:function(){this.createShadowbox(),this.setupControls(),this.setupSlides();var e=window.location.hash;"#rc_"===e.substring(0,4)&&document.getElementById(e.substr(1)).click()},setupSocialAddonButtons:function(){"function"==typeof insertButton&&(this.insertSocialButton(rc_gallery_social_addon_button1),this.insertSocialButton(rc_gallery_social_addon_button2),this.insertSocialButton(rc_gallery_social_addon_button3),this.insertSocialButton(rc_gallery_social_addon_button4))},removeButtons:function(){var e=i.querySelectorAll("a");[].forEach.call(e,function(e){e.parentNode.removeChild(e)})},createShadowbox:function(){a=document.querySelector("body"),(t=document.createElement("div")).id="rc_sb_overlay",t.classList.add("rc_hidden"),(e=document.createElement("div")).id="rc_sb_container",e.classList.add("rc_hidden"),(i=document.createElement("div")).id="rc_sb_toolbar",(n=document.createElement("div")).id="rc_sb_close",n.classList.add("rc_sb_button"),(s=document.createElement("div")).id="rc_sb_prev",s.classList.add("rc_sb_button"),(d=document.createElement("div")).id="rc_sb_next",d.classList.add("rc_sb_button"),(o=document.createElement("div")).classList.add("rc_sb_loading"),o.classList.add("rc_hidden"),i.appendChild(n),e.appendChild(i),e.appendChild(s),e.appendChild(d),e.appendChild(o),a.appendChild(t),a.appendChild(e),m&&((r=document.createElement("div")).id="rc_sb_title",e.appendChild(r))},setupSlides:function(){var t=document.querySelectorAll("a[rel^='shadowbox']"),i=0;[].forEach.call(t,function(t){var n=document.createElement("img");n.id="rc_sb_slide_"+i,n.classList.add("rc_sb_image");var s=t.querySelector("img"),d=s.dataset.width/s.dataset.height;_[i]={id:i,shadowboxAnchor:t,src:t.href,alt:s.alt,title:t.dataset.imagetitle,slideElem:n,startingSize:{width:s.dataset.width,height:s.dataset.height},ratio:d,orientation:d>=1?"landscape":"portrait"},e.appendChild(n),i+=1})},setupControls:function(){var t=this,i=document.querySelectorAll("a[rel^='shadowbox']");[].forEach.call(i,function(e){e.addEventListener("click",function(i){i.preventDefault();var n=_.filter(function(t){return t.src==e.href})[0];t.openSlide(n)})}),s.addEventListener("click",function(){t.prevSlide()}),d.addEventListener("click",function(){t.nextSlide()}),n.addEventListener("click",function(){t.close()}),e.addEventListener("click",function(i){i.target===e&&t.close()}),jQuery("#rc_sb_container").on("swipeleft",function(){t.nextSlide()}),jQuery("#rc_sb_container").on("swiperight",function(){t.prevSlide()}),window.addEventListener("keydown",function(e){if(u&&!h)switch(h=!0,e.key){case"ArrowRight":t.nextSlide();break;case"ArrowLeft":t.prevSlide();break;case"Backspace":case"Escape":t.close()}}),window.addEventListener("keyup",function(){h=!1})},insertSocialButton:function(e){if(e){var t,i,n,s=this;switch(e){case 1:t="Facebook",i=rc_fb_shareURL,n="rc_fbshareaddon_button";break;case 2:t="Twitter",i=rc_twitter_shareURL,n="rc_twittershareaddon_button";break;case 3:t="Google+",i=rc_gp_shareURL,n="rc_gpshareaddon_button";break;case 4:t="Tumblr",i=rc_tumblr_shareURL,n="rc_tumblrshareaddon_button"}this.insertButton("Share on "+t,[n,"rc_sb_button","rc_sb_addonbutton"],"#").addEventListener("click",function(e){e.preventDefault();var t="menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600,top="+(window.innerHeight-600)/2+",left="+(window.innerWidth-600)/2,n=s.getCurrentSlide().shadowboxAnchor.childNodes[0].id,d=i+rc_gallery_social_addon_pageURL+"%23"+n;window.open(d,"",t)})}},openSlide:function(e){if(c=e.id,u||this.open(),this.removeButtons(),this.setupSocialAddonButtons(),m&&(r.innerHTML=e.title),e.slideElem.classList.remove("rc_sb_hidden_left"),e.slideElem.classList.remove("rc_sb_hidden_right"),e.slideElem.src)window.getComputedStyle(e.slideElem).getPropertyValue("transition"),e.slideElem.classList.remove("rc_sb_hidden_centre"),o.classList.add("rc_hidden");else{e.slideElem.alt="",o.classList.remove("rc_hidden");var t=new Image;t.onload=function(){e.slideElem.alt=e.alt,e.slideElem.src=e.src,window.getComputedStyle(e.slideElem).getPropertyValue("transition"),e.slideElem.classList.remove("rc_sb_hidden_centre"),o.classList.add("rc_hidden")},t.src=e.src}var i=this.getPrevSlide();i.slideElem.classList.contains("rc_sb_hidden_centre")||(i.slideElem.classList.add("rc_sb_hidden_left"),setTimeout(function(){i.id!==c&&(i.slideElem.classList.remove("rc_sb_hidden_left"),i.slideElem.classList.add("rc_sb_hidden_centre"))},560));var n=this.getNextSlide();n.slideElem.classList.contains("rc_sb_hidden_centre")||(n.slideElem.classList.add("rc_sb_hidden_right"),setTimeout(function(){n.id!==c&&(n.slideElem.classList.remove("rc_sb_hidden_right"),n.slideElem.classList.add("rc_sb_hidden_centre"))},560))},nextSlide:function(){this.openSlide(this.getNextSlide())},prevSlide:function(){this.openSlide(this.getPrevSlide())},getCurrentSlide:function(){return _[c]},getNextSlide:function(){var e=c>=_.length-1?0:c+1;return _[e]},getPrevSlide:function(){var e=0==c?_.length-1:c-1;return _[e]},close:function(){u=!1,e.classList.add("rc_hidden"),t.classList.add("rc_hidden"),_[c].slideElem.classList.add("rc_sb_hidden_centre"),"1"===b&&setTimeout(function(){a.style.overflow=l},280)},open:function(){u=!0,e.classList.remove("rc_hidden"),t.classList.remove("rc_hidden"),_.forEach(function(e){e.slideElem.classList.add("rc_sb_hidden_centre"),e.slideElem.classList.remove("rc_sb_hidden_left"),e.slideElem.classList.remove("rc_sb_hidden_right")}),"1"===b&&(l=a.style.overflow,a.style.overflow="hidden")},insertButton:function(e,t,n){var s=document.createElement("div"),d=document.createElement("a");return d.title=e,d.href=n,t.forEach(function(e){s.classList.add(e)}),n&&(s.href=n),d.appendChild(s),i.appendChild(d),s},getAnchorLinkForCurrentSlide:function(){}}};